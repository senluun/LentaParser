# Парсер каталога товаров Лента

Тестовое задание: парсинг данных о товарах из API сети магазинов Лента для Москвы и Санкт-Петербурга.

## Описание

Python скрипты для получения и обработки данных о товарах через API Ленты:
- Получение товаров для Москвы и Санкт-Петербурга
- Парсинг и структурирование данных
- Сохранение в JSON формате

## Быстрый старт

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Запустите скрипты:
```bash
# Получить данные для Санкт-Петербурга
python scripts/parse_spb.py

# Получить данные для Москвы
python scripts/parse_msk.py

# Обработать данные в упрощенный формат
python scripts/parse_items.py
```

## Структура проекта

```
.
├── scripts/                      # Python скрипты
│   ├── parse_spb.py             # Парсер для СПб
│   ├── parse_msk.py             # Парсер для Москвы
│   ├── get_items_by_cities.py   # Парсер для нескольких городов
│   └── parse_items.py           # Обработка JSON данных
│
├── data/                         # Выгруженные данные (создается автоматически)
│   ├── catalog_items.json       # Полные данные СПб
│   ├── msk_results.json         # Полные данные Москвы
│   ├── parsed_spb_items.json    # Обработанные данные СПб
│   ├── parsed_msk_items.json    # Обработанные данные Москвы
│   └── items_by_cities.json     # Данные по городам
│
├── requirements.txt              # Зависимости (requests)
└── README.md                     # Документация
```

## Описание скриптов

### parse_spb.py
Получает каталог товаров для Санкт-Петербурга через API.
- Результат: `data/catalog_items.json`

### parse_msk.py
Получает каталог товаров для Москвы через API.
- Результат: `data/msk_results.json`

### get_items_by_cities.py
Получает товары для обоих городов с информацией о местоположении.
- Автоматически находит ближайший магазин по координатам
- Результат: `data/items_by_cities.json`

### parse_items.py
Обрабатывает полные данные в упрощенный формат.
- Извлекает основные поля: ID, название, цены, бренд, наличие
- Обрабатывает оба города автоматически
- Результат: `data/parsed_spb_items.json` и `data/parsed_msk_items.json`

## Формат данных

### Упрощенный формат товара
```json
{
  "id": 123456,
  "name": "НАЗВАНИЕ Товара 500г",
  "regular_price": 199.99,
  "promo_price": 149.99,
  "brand": "НАЗВАНИЕ",
  "in_stock": 10,
  "available": true
}
```

### Формат с городом
```json
{
  "id": 123456,
  "name": "НАЗВАНИЕ Товара 500г",
  "regular_price": 199.99,
  "promo_price": 149.99,
  "brand": "НАЗВАНИЕ",
  "in_stock": 10,
  "city": "Москва",
  "store_id": 789
}
```

## Требования

- Python 3.7+
- requests >= 2.31.0

## Примечания

- Папка `data/` создается автоматически
- Скрипты можно запускать из любой директории
- JSON файлы в `data/` игнорируются Git
- API токены могут устаревать 

